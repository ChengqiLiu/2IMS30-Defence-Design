{{ autogenerated_c_header }}

#include <stdbool.h>
#include <em_common.h>
#include "sl_btctrl_linklayer.h"
#include "sl_btctrl_config.h"
#include "sl_btctrl_acceptance_list_config.h"

#ifdef SL_COMPONENT_CATALOG_PRESENT
#include "sl_component_catalog.h"
#endif // SL_COMPONENT_CATALOG_PRESENT

{%- for entry in bluetooth_controller_init %}
{%-   if entry["include"] is string %}
#include "{{ entry["include"] }}"
{%-   else %}
{%-     for f in entry["include"] %}
#include "{{ f }}"
{%-     endfor %}
{%-   endif %}
{%- endfor %}

#ifndef SL_BT_CONFIG_MAX_CONNECTIONS
#define SL_BT_CONFIG_MAX_CONNECTIONS 0
#endif
#ifndef SL_BT_CONFIG_USER_ADVERTISERS
#define SL_BT_CONFIG_USER_ADVERTISERS 0
#endif
#ifndef SL_BT_CONFIG_ACCEPT_LIST_SIZE
#define SL_BT_CONFIG_ACCEPT_LIST_SIZE 0
#endif
#ifndef SL_BT_ACTIVATE_POWER_CONTROL
#define SL_BT_ACTIVATE_POWER_CONTROL 0
#endif

void sl_bt_controller_init(void)
{
  if(sl_btctrl_is_initialized() == true)
  {
    return;
  }
  sl_btctrl_init_mem(SL_BT_CONTROLLER_BUFFER_MEMORY);
#if !defined(SL_CATALOG_KERNEL_PRESENT)
  sli_btctrl_events_init();
#endif
  sl_btctrl_init_ll();
  {%- for entry in bluetooth_controller_init %}
  {%-   if entry["function"] is string %}
  {{ entry["function"] }};
  {%-   endif %}
  {%- endfor %}
}
sl_status_t sl_bt_ll_deinit();

void sl_bt_controller_deinit(void)
{
  if(sl_btctrl_is_initialized() == false){    
    return;
  }
  
  {%-for entry in bluetooth_controller_init |reverse if entry["deinit"] is string%}
  {{ entry["deinit"] }};
  {%- endfor %}

  sli_btctrl_deinit_mem();
}